function initialize(){var a={center:{lat:27.495,lng:-109.969},zoom:16,panControl:!1,streetViewControl:!1,zoomControl:!1,overviewMapControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.TERRAIN]}};map=new google.maps.Map(document.getElementById("map-canvas"),a),infowindow=new google.maps.InfoWindow,$("#map-canvas").removeClass("center"),$(".placeslist.fixed").removeClass("hidden"),$("#topbar").removeClass("hidden"),ko.applyBindings(new ViewModel)}function createErrorMessage(a,b){var c=document.createElement("div"),d=document.createTextNode(a+" "),e=document.createElement("a");e.setAttribute("href","http://www.isup.me/"+b);var f=document.createTextNode("Maybe the servers are down?");c.appendChild(d),e.appendChild(f),c.appendChild(e),c.className="alert-box warning";var g=document.getElementById("messages");g.appendChild(c)}var type={food:{icon:"img/food.svg",marker:"img/pin-red-10-small.svg"}},Location=function(a,b,c,d,e){var f=this;f.title=ko.observable(a),f.content='<div tabindex="1" href="#"><h2 class="info-title">'+a+'</h2><p class="info-description">'+b+"</p></div>",f.description=ko.observable(b),f.latitude=ko.observable(c),f.longitude=ko.observable(d),f.icon=ko.observable(e.icon),f.marker=new google.maps.Marker({position:new google.maps.LatLng(f.latitude(),f.longitude()),map:map,icon:e.marker,animation:google.maps.Animation.DROP,title:f.title()}),f.infoWindow=function(){infowindow.setContent(f.content),infowindow.open(map,f.marker)},f.toggleBounce=function(){f.marker.setAnimation(null!=f.marker.getAnimation()?null:google.maps.Animation.BOUNCE)},google.maps.event.addListener(f.marker,"click",f.infoWindow)},ViewModel=function(){var a=this;a.locations=ko.observableArray([new Location("Lockers",'Sports restaurant and bar (Trying the "Michael Phelps" pizza is a must)',27.493921,-109.974107,type.food),new Location("Kiawa","University's restaurant",27.49356,-109.972613,type.food),new Location("Do√±a Magui","Homemade food",27.49033,-109.97275,type.food),new Location("Comedor ITSON","University's restaurant",27.491831,-109.970547,type.food),new Location("Cafeteria ITSON","University's restaurant",27.492045,-109.969547,type.food)]),a.currentLocation=ko.observable(a.locations()[0]),a.setCurrentLocation=function(b){return(b=a.getLocation(b.title()))?(b!=a.currentLocation()?a.currentLocation().marker.setAnimation(null):a.currentLocation(),b.marker.setAnimation(google.maps.Animation.BOUNCE),a.currentLocation(b)):void 0},a.getLocation=function(b){for(var c in a.locations())if(a.locations()[c].title()===b)return a.locations()[c]},a.openInfoWindow=function(b){var c='<div tabindex="1" href="#"><h2 class="info-title">'+b.title()+'</h2><p class="info-description">'+b.description()+"</p></div>";infowindow.setContent(c),infowindow.open(map,b.marker),a.setCurrentLocation(b),$("#placeslist-switcher").attr("checked",!1)};ko.observable(parent.infowindow.getAnchor());google.maps.event.addListener(parent.infowindow,"domready",function(){var b=a.getLocation(parent.infowindow.getAnchor().title);b&&(a.setCurrentLocation(b),map.panTo(a.currentLocation().marker.getPosition()))}),google.maps.event.addListener(parent.infowindow,"closeclick",function(){a.currentLocation().marker.setAnimation(null)})},map,infowindow;try{google.maps.event.addDomListener(window,"load",initialize)}catch(e){createErrorMessage("Oops. Google maps couldn't be reached. Verify your internet connection.","maps.google.com")}